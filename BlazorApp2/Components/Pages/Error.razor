@page "/Error"
@using System.Diagnostics

<PageTitle>Error - Car Maintenance App</PageTitle>

<div class="error-page-container">
    <div class="error-card">
        <div class="error-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" fill="currentColor" viewBox="0 0 16 16">
                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
            </svg>
        </div>
        
        <h1 class="error-title">Something went wrong</h1>
        <p class="error-message">We're sorry, an unexpected error occurred while processing your request.</p>
        
        @if (ShowRequestId)
        {
            <div class="error-details">
                <span class="error-label">Request ID</span>
                <code class="error-code">@RequestId</code>
            </div>
        }
        
        <div class="error-actions">
            <a href="/" class="btn btn-primary">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"/>
                </svg>
                Go Home
            </a>
            <a href="/garage" class="btn btn-secondary">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M2.52 3.515A2.5 2.5 0 0 1 4.82 2h6.362c1 0 1.904.596 2.298 1.515l.792 1.848c.075.175.21.319.38.404.5.25.855.715.965 1.262l.335 1.679c.033.161.049.325.049.49v.413c0 .814-.39 1.543-1 1.997V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.338c-1.292.048-2.745.088-4 .088s-2.708-.04-4-.088V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.892c-.61-.454-1-1.183-1-1.997v-.413a2.5 2.5 0 0 1 .049-.49l.335-1.68c.11-.546.465-1.012.964-1.261a.807.807 0 0 0 .381-.404l.792-1.848ZM3 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm10 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM6 8a1 1 0 0 0 0 2h4a1 1 0 1 0 0-2H6ZM2.906 5.189a.51.51 0 0 0 .497.731c.91-.073 3.35-.17 4.597-.17 1.247 0 3.688.097 4.597.17a.51.51 0 0 0 .497-.731l-.956-1.913A.5.5 0 0 0 11.691 3H4.309a.5.5 0 0 0-.447.276L2.906 5.19Z"/>
                </svg>
                My Garage
            </a>
        </div>
        
        <div class="error-help">
            <p>If this problem persists, please try:</p>
            <ul>
                <li>Refreshing the page</li>
                <li>Clearing your browser cache</li>
                <li>Coming back later</li>
            </ul>
        </div>
    </div>
</div>

<style>
    .error-page-container {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 80vh;
        padding: var(--space-lg);
    }
    
    .error-card {
        background: var(--bg-card, #fff);
        border-radius: var(--radius-xl, 16px);
        box-shadow: var(--shadow-lg, 0 10px 15px rgba(0, 0, 0, 0.1));
        padding: var(--space-2xl, 3rem);
        text-align: center;
        max-width: 500px;
        width: 100%;
    }
    
    .error-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 120px;
        height: 120px;
        margin: 0 auto var(--space-lg, 1.5rem);
        background: rgba(209, 0, 0, 0.1);
        border-radius: var(--radius-full, 9999px);
        color: var(--brand-primary, #d10000);
    }
    
    .error-title {
        font-size: var(--text-2xl, 1.5rem);
        font-weight: var(--font-bold, 700);
        color: var(--text-primary, #1a1a1a);
        margin: 0 0 var(--space-sm, 0.5rem) 0;
    }
    
    .error-message {
        font-size: var(--text-base, 1rem);
        color: var(--text-secondary, #666);
        margin: 0 0 var(--space-lg, 1.5rem) 0;
    }
    
    .error-details {
        display: flex;
        flex-direction: column;
        gap: var(--space-xs, 0.25rem);
        padding: var(--space-md, 1rem);
        background: var(--bg-muted, #f5f5f5);
        border-radius: var(--radius-md, 8px);
        margin-bottom: var(--space-lg, 1.5rem);
    }
    
    .error-label {
        font-size: var(--text-xs, 0.75rem);
        color: var(--text-muted, #999);
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }
    
    .error-code {
        font-family: var(--font-family-mono, 'SF Mono', 'Monaco', 'Inconsolata', monospace);
        font-size: var(--text-sm, 0.875rem);
        color: var(--text-primary, #1a1a1a);
        word-break: break-all;
    }
    
    .error-actions {
        display: flex;
        gap: var(--space-sm, 0.5rem);
        justify-content: center;
        flex-wrap: wrap;
        margin-bottom: var(--space-xl, 2rem);
    }
    
    .error-help {
        text-align: left;
        padding-top: var(--space-lg, 1.5rem);
        border-top: 1px solid var(--border-default, #e5e5e5);
    }
    
    .error-help p {
        font-size: var(--text-sm, 0.875rem);
        color: var(--text-secondary, #666);
        margin: 0 0 var(--space-sm, 0.5rem) 0;
    }
    
    .error-help ul {
        margin: 0;
        padding-left: var(--space-lg, 1.5rem);
        font-size: var(--text-sm, 0.875rem);
        color: var(--text-muted, #999);
    }
    
    .error-help li {
        margin-bottom: var(--space-xs, 0.25rem);
    }
</style>

@code {
    [CascadingParameter] private HttpContext? HttpContext { get; set; }

    private string? RequestId { get; set; }
    private bool ShowRequestId => !string.IsNullOrEmpty(RequestId);

    protected override void OnInitialized() =>
        RequestId = Activity.Current?.Id ?? HttpContext?.TraceIdentifier;

}