@*
    VehicleCard Component
    Display a vehicle in card or list format
    Clean layout with photo placeholder
    
    Usage:
    <VehicleCard 
        Vehicle="vehicle" 
        UserVehicle="userVehicle"
        DisplayMode="VehicleCard.Mode.Card"
        OnClick="() => NavigateToVehicle(vehicle.Id)" />
*@

@using BlazorApp2.Data.Models

@if (DisplayMode == Mode.Card)
{
    <div class="vehicle-card @(UserVehicle?.IsPrimary == true ? "primary" : "")" @onclick="HandleClick">
        <div class="vehicle-card-header">
            <span class="year-badge">@Vehicle.Year</span>
            <div class="vehicle-badges">
                @if (!string.IsNullOrEmpty(Vehicle.BodyClass))
                {
                    <span class="badge badge-light">@Vehicle.BodyClass</span>
                }
                @if (UserVehicle?.IsPrimary == true)
                {
                    <span class="badge badge-primary">Primary</span>
                }
            </div>
        </div>
        
        <div class="vehicle-image-placeholder">
            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" viewBox="0 0 16 16">
                <path d="M2.52 3.515A2.5 2.5 0 0 1 4.82 2h6.362c1 0 1.904.596 2.298 1.515l.792 1.848c.075.175.21.319.38.404.5.25.855.715.965 1.262l.335 1.679c.033.161.049.325.049.49v.413c0 .814-.39 1.543-1 1.997V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.338c-1.292.048-2.745.088-4 .088s-2.708-.04-4-.088V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.892c-.61-.454-1-1.183-1-1.997v-.413a2.5 2.5 0 0 1 .049-.49l.335-1.68c.11-.546.465-1.012.964-1.261a.807.807 0 0 0 .381-.404l.792-1.848ZM3 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm10 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM6 8a1 1 0 0 0 0 2h4a1 1 0 1 0 0-2H6ZM2.906 5.189a.51.51 0 0 0 .497.731c.91-.073 3.35-.17 4.597-.17 1.247 0 3.688.097 4.597.17a.51.51 0 0 0 .497-.731l-.956-1.913A.5.5 0 0 0 11.691 3H4.309a.5.5 0 0 0-.447.276L2.906 5.19Z"/>
            </svg>
        </div>
        
        <div class="vehicle-card-body">
            @if (!string.IsNullOrEmpty(UserVehicle?.Nickname))
            {
                <span class="vehicle-nickname">@UserVehicle.Nickname</span>
            }
            <h3 class="vehicle-title">@Vehicle.Make?.Name @Vehicle.Model</h3>
            @if (!string.IsNullOrEmpty(Vehicle.Series) || !string.IsNullOrEmpty(Vehicle.Trim))
            {
                <p class="vehicle-subtitle">
                    @if (!string.IsNullOrEmpty(Vehicle.Series))
                    {
                        @Vehicle.Series
                    }
                    @if (!string.IsNullOrEmpty(Vehicle.Series) && !string.IsNullOrEmpty(Vehicle.Trim))
                    {
                        <span> Â· </span>
                    }
                    @if (!string.IsNullOrEmpty(Vehicle.Trim))
                    {
                        @Vehicle.Trim
                    }
                </p>
            }
        </div>
        
        <div class="vehicle-card-action">
            <span>View Details</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
            </svg>
        </div>
    </div>
}
else
{
    @* List/Row Mode *@
    <div class="vehicle-row @(UserVehicle?.IsPrimary == true ? "primary" : "")" @onclick="HandleClick">
        <div class="vehicle-row-content">
            <span class="vehicle-row-year">@Vehicle.Year</span>
            <span class="vehicle-row-title">@Vehicle.Make?.Name @Vehicle.Model</span>
            @if (!string.IsNullOrEmpty(UserVehicle?.Nickname))
            {
                <span class="vehicle-row-nickname">"@UserVehicle.Nickname"</span>
            }
            @if (!string.IsNullOrEmpty(Vehicle.Trim))
            {
                <span class="vehicle-row-trim">@Vehicle.Trim</span>
            }
        </div>
        @if (UserVehicle?.IsPrimary == true)
        {
            <span class="badge badge-primary badge-sm">Primary</span>
        }
        <div class="vehicle-row-arrow">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
            </svg>
        </div>
    </div>
}

@code {
    [Parameter, EditorRequired] public Vehicle Vehicle { get; set; } = default!;
    [Parameter] public UserVehicle? UserVehicle { get; set; }
    [Parameter] public Mode DisplayMode { get; set; } = Mode.Card;
    [Parameter] public EventCallback OnClick { get; set; }

    private async Task HandleClick()
    {
        await OnClick.InvokeAsync();
    }

    public enum Mode
    {
        Card,
        List
    }
}

